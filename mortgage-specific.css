/* ==========================================================================
   Mortgage Calculator Specific Styles
   Mortgage-specific colors, layouts, and component overrides
   Requires: cfa-base.css
   
   NOTE: All table styles are now in cfa-base.css for consistency
   ========================================================================== */

/* ==========================================================================
   1. MORTGAGE-SPECIFIC COLOR ASSIGNMENTS
   ========================================================================== */
:root {
  /* Mortgage Calculator Specific Colors - Using brand palette */
  --color-mortgage-payment: var(--color-blue-interactive);  /* #3c6ae5 - Monthly payment */
  --color-mortgage-principal: var(--color-orange-deep);     /* #b95b1d - Principal */
  --color-mortgage-interest: var(--color-purple-bold);      /* #7a46ff - Interest rate */
  --color-mortgage-term: var(--color-green-data-alt);       /* #047857 - Loan term */
}

/* ==========================================================================
   1.5 MODEL EQUATIONS GRID - Three Formula Boxes
   ========================================================================== */
.model-equations-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem;
}

@media (min-width: 768px) {
  .model-equations-grid {
    grid-template-columns: 1fr 1fr 1fr;  /* Equal thirds */
  }
}

@media (max-width: 767px) {
  .model-equations-grid {
    grid-template-columns: 1fr;
  }
  
  .formula-box {
    min-height: auto;
  }
}

/* ==========================================================================
   1.5 FORMULA BOXES - Override cfa-base.css completely
   ========================================================================== */
.formula-box {
  /* Remove ALL borders first */
  border: none !important;
  border-top: none !important;
  border-right: none !important;
  border-bottom: none !important;
  /* Only left border */
  border-left: 4px solid var(--color-gray-400) !important;
  /* Styling */
  padding: 0.75rem 1rem !important;
  background: white !important;
  border-radius: 0 0.5rem 0.5rem 0 !important;
  margin-top: 0 !important;
  min-height: 160px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  overflow: hidden;
}

.formula-box.pmt {
  border-left-color: #3c6ae5 !important;  /* Blue */
}

.formula-box.int {
  border-left-color: #7a46ff !important;  /* Purple */
}

.formula-box.prn {
  border-left-color: #15803d !important;  /* Green */
}

.formula-box-title {
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  color: var(--color-gray-700) !important;
  margin-top: 0 !important;
  margin-bottom: 0.5rem !important;
  text-align: center !important;
  text-transform: uppercase !important;
  letter-spacing: 0.025em !important;
  padding: 0 !important;
}

.equation-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  /* Override cfa-base.css box styling */
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: 0.5rem !important;
  margin: 0 !important;
}

/* Equation result styling */
.equation-result-main {
  font-size: 1.1rem;
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  text-align: center;
}

.equation-result-main.pmt {
  color: #1e40af;  /* Darker blue for contrast */
  background: rgba(60, 106, 229, 0.08);
  font-weight: 700;  /* Bolder for better readability */
}

.equation-result-main.int {
  color: #5b21b6;  /* Darker purple for contrast */
  background: rgba(122, 70, 255, 0.08);
  font-weight: 700;
}

.equation-result-main.prn {
  color: #047857;  /* Use existing darker green */
  background: rgba(21, 128, 61, 0.08);
  font-weight: 700;
}

.equation-note {
  font-size: 0.8125rem;
  color: var(--color-gray-600);
  font-style: italic;
  text-align: center;
  margin-top: 0.5rem;
}

.equation-intro {
  font-size: 0.875rem;
  color: var(--color-gray-600);
  margin-bottom: 1rem;
  text-align: center;
}

/* ==========================================================================
   1.5 MIDDLE ROW LAYOUT - 1:3 RATIO
   ========================================================================== */
.middle-row {
  display: grid;
  grid-template-columns: 1fr 3fr;
  gap: 1.5rem;
}

/* Stack on mobile */
@media (max-width: 768px) {
  .middle-row {
    grid-template-columns: 1fr;
  }
}

/* ==========================================================================
/* ==========================================================================
   2. RESULT BOXES - Mortgage-Specific (3-box layout)
   ========================================================================== */
.results-grid {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Principal Amount Box - Orange theme */
.result-box-principal {
  background-color: #fff7ed;  /* Light Orange BG */
  border: 2px solid #b95b1d;  /* Orange Deep border */
  border-radius: 0.5rem;
  padding: 1.25rem;
}

.result-box-principal .result-title {
  font-size: 0.8125rem;
  font-weight: 600;
  color: #8b4513;  /* Match darker orange */
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.result-box-principal .result-value {
  font-size: 1.5rem;
  font-weight: 800;
  color: #8b4513;  /* Darker orange/brown for better contrast */
  line-height: 1.2;
}

/* Monthly Payment Box - Blue theme */
.result-box-monthly {
  background-color: #eff6ff;  /* Light Blue BG */
  border: 2px solid #3c6ae5;  /* Blue Interactive border */
  border-radius: 0.5rem;
  padding: 1.25rem;
}

.result-box-monthly .result-title {
  font-size: 0.8125rem;
  font-weight: 600;
  color: #1e40af;  /* Match darker blue */
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.result-box-monthly .result-value {
  font-size: 1.5rem;
  font-weight: 800;
  color: #1e40af;  /* Darker blue for better contrast */
  line-height: 1.2;
  margin-bottom: 0.5rem;
}

.result-box-monthly .result-subtitle {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-gray-600);
}

/* Interest Box - Purple theme */
.result-box-interest {
  background-color: #faf5ff;  /* Light Purple BG */
  border: 2px solid #7a46ff;  /* Purple Bold border */
  border-radius: 0.5rem;
  padding: 1.25rem;
}

.result-box-interest .result-title {
  font-size: 0.8125rem;
  font-weight: 600;
  color: #7a46ff;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.result-box-interest .result-detail {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-gray-700);
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.result-box-interest .result-detail strong {
  color: #7a46ff;
  font-weight: 600;
  font-size: 0.875rem;
}

.result-box-interest .result-detail:last-child {
  margin-bottom: 0;
}

/* ==========================================================================
   3. INPUT LAYOUT â€“ Bond-style Inline Layout
   ========================================================================== */
.input-group-inline {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 2rem;
}

.input-inline {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  white-space: nowrap;
}

.input-label-inline {
  font-size: 0.875rem;
  color: var(--color-gray-700);
  min-width: fit-content;
}

.input-with-suffix-inline {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  width: 6rem;
  position: relative;
}

.input-field-inline {
  flex: 1;
  width: 100%;
  padding: 0.4rem 0.5rem;
  padding-right: 1.5rem;
  border: 1px solid var(--color-gray-300);
  border-radius: 0.375rem;
  font-size: 0.875rem;
  text-align: right;
  box-sizing: border-box;
}

.input-field-inline:hover {
  border-color: var(--color-gray-500);
}

.input-field-inline:focus {
  outline: none;
  border-color: var(--color-blue-interactive);
  box-shadow: 0 0 0 2px rgba(60, 106, 229, 0.1);
}

.input-suffix-inline {
  position: absolute;
  right: 0.4rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-gray-500);
  pointer-events: none;
  width: 1.2rem;
  text-align: right;
  font-size: 0.875rem;
}

@media (max-width: 640px) {
  .input-group-inline {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }
  
  .input-inline {
    width: 100%;
  }
  
  .input-with-suffix-inline {
    width: 100%;
    max-width: 12rem;
  }
}

/* ==========================================================================
   4. EDUCATIONAL NOTE
   ========================================================================== */
.educational-note {
  margin-top: 1rem;
  padding: 0.75rem;
  background: var(--color-gray-50);
  border-radius: 0.5rem;
  font-size: 0.875rem;
  color: var(--color-gray-700);
}

/* ==========================================================================
   5. CHART LEGEND â€“ Mortgage-specific
   ========================================================================== */
.chart-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  margin-bottom: 1rem;
  font-size: 0.875rem;
  color: var(--color-gray-700);
}

.legend-item {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.legend-color {
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 0.125rem;
  display: inline-block;
}

/* ==========================================================================
   6. DYNAMIC EQUATION CONTAINER
   ========================================================================== */
#dynamic-equation-container {
  margin-top: 0.5rem;
}

#dynamic-equation-container math {
  font-size: 1rem;
  color: var(--color-gray-700);
}

/* Center the generated equation the same way as the static one */
#dynamic-mathml-equation { 
  text-align: center; 
}
#dynamic-mathml-equation > math {
  display: inline-block;
  margin: 0.5em auto;
}


/* Match the bond pageâ€™s robust centering */
.equation-container { text-align: center; }
#mathml-equation { display: inline-block; width: auto; }
math[display="block"] { margin: 0.5em auto; }

/* Force equation boxes to match dividend - nuclear option */
.model-equations-grid .formula-box,
.card .formula-box,
#equation-card .formula-box {
  border: 0 !important;
  border-width: 0 !important;
  border-style: none !important;
  border-left: 4px solid #999 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
}

#equation-card .formula-box.pmt {
  border-left-color: #3c6ae5 !important;
}

#equation-card .formula-box.int {
  border-left-color: #7a46ff !important;
}

#equation-card .formula-box.prn {
  border-left-color: #15803d !important;
}